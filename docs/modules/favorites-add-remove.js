import*as t from"./favorites-show-hide.js";const e={add:"Add to Favorites",remove:"Remove from Favorites"},o=o=>{const s=o.closest("article"),a=s.dataset.content,i=JSON.parse(a),r=i.uuid;if(i.type){const a=s.classList.contains("favorite");s.classList.toggle("favorite"),o.ariaChecked=!a,o.title=a?e.add:e.remove,a?(t=>{const e=JSON.parse(localStorage.getItem("favorites"));if(e){const o=e.indexOf(t);o>-1&&(e.splice(o,1),localStorage.setItem("favorites",JSON.stringify(e)))}})(r):(t=>{const e=JSON.parse(localStorage.getItem("favorites"));if(e){if(e.includes(t))return;e.push(t),localStorage.setItem("favorites",JSON.stringify(e))}else localStorage.setItem("favorites",JSON.stringify([t]))})(r),(()=>{if(document.documentElement.classList.contains("show-favorites")){const t=document.querySelectorAll("article");t.length>=1&&t.forEach((t=>{t.classList.contains("favorite")||(t.style.display="none")}))}})(),(()=>{const e=document.documentElement.classList.contains("show-favorites");e&&t.getFavsCount()<1&&(document.documentElement.classList.remove("show-favorites"),t.showAllArticles(),t.toggleButtonValues(e))})()}};export const init=()=>{document.querySelectorAll(".add-to-favorites").length&&((()=>{const t=JSON.parse(localStorage.getItem("favorites"));t&&t.forEach((t=>{const e=document.querySelector(`[data-content*="${t}"]`);if(e){const t=e.querySelector(".add-to-favorites"),o="Remove from favorites";e.classList.add("favorite"),t.setAttribute("aria-checked","true"),t.title=o}}))})(),document.addEventListener("click",(t=>{if(t.target.closest(".add-to-favorites")){const e=t.target.closest(".add-to-favorites");o(e)}})))};